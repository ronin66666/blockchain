Uniswap

[Uniswap深度科普](https://zhuanlan.zhihu.com/p/380749685)

## UniswapV2

[`uniswapV2详解`](./UniswapV2.md)

## UniswapV3

[`UniswapV3详解`](./UniswapV3.md)

## V3解决的问题

### v2中资金使用率低的问题

先看一下v2版本中资金使用率低的问题，在v2的版本里流动性沿储备金曲线均匀分布，储备金曲线方程式如下：x * y = k

在这个方程式中，x和y分别代表两种代币X和Y的储备量，除了k是一个常数之外，对x和y的值没有特别限制，也就是说价格区间是从0到无穷大的，这样设计容易实现并且可以有效地聚合流动性，但由于实际市场价格是在有限区间内波动的，这就意味着流动性池中的大部分资产是永远不会被触及到的，导致**资金利用率非常低**，举个简单的例子：

假设WETH/USDC交易对的流动性池中共有资金：9000 USDC 和 2 WETH，即WETH的价格为4500 USDC

根据 x · y = k（以x代表WETH，y代表USDC），可以计算出：

k = 9000 * 2 = 18000

当WETH价格下降到4000 USDC时，根据 x · y = 18000，y / x = 4000 可以计算出此时USDC的资金约为：

y’ = 8485

资金使用率为：

(9000 - 8485) / 9000 = 5.72%

也就是说在价格有较大波动的情况下，资金使用率也没有超过10%，那么这个问题对于稳定币池（如USDC/DAI）来说就会更严重。

### 集中流动性

为了解决v2中资金使用率的问题，v3中引入了集中流动性，**集中流动性**的定义：流动性提供者（LPs）可以将其提供的流动性“限制”在任意的价格区间内来集中其流动性。

也就是在v3版本里允许LPs把其提供的流动性集中在一段价格区间（position）里，这样不仅能有效的提升资金利用率，同时由于流动性集中在了更小的区间，使得这个价格区间里有更深的交易深度，即更大的流动性。
